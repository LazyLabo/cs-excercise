# 内容

このワークではプログラミングにおける*関数*（英語でfunction）に関して２つのアプローチで理解を深めます。プログラミング言語はJavaScriptですが、他のプログラミング言語と書き方はさほど違いはありません。それよりも関数に関連した概念をしっかり理解することが大切です。

セクション１では、すでにある関数をいくつか使ってみます

セクション２では、自分で新たに関数を作るやり方を学びます

セクション３は、おまけです。関数の作り方でちょっと細かいルールを紹介してます。これはやってもやらなくても大丈夫です。


# セクション１ 関数を使ってみる

# 1.1 メッセージを表示する関数を使ってみる

## 問題

ブラウザに「hello!」とメッセージのポップアップを表示させたいです。どうやったら出来ますか？

### ヒント

- ブラウザには ``` window ```という名前の*オブジェクト*が入っています。
- オブジェクトを使うことはすなわちプログラングそのものです。またオブジェクトを作ることもプログラミングの一部です（別の機会に解説します）
- ```window``` このオブジェクトにはたくさんの便利な関数があって、その中の```alert()```という関数は、指定したテキストをポップアップ形式で表示してくれます。

<br/><br/><br/><br/><br/>

### 実際にやってみよう！　

```javascript
window.alert('hello')
```

<br/><br/><br/><br/><br/>

### ふりかえり

- ```window``` というオブジェクトに仕事をさせました。このオブジェクトはブラウザがスタートしたら自動的に作れらます
- オブジェクトにはいろんな関数があらかじめ備わっています
- メッセージは*'*記号で囲みました。これを*文字列*と呼びます。英語では character array と呼びます
- メッセージをカッコ（）の中に指定して、関数に渡しました
- 関数に渡すものを*引数*と呼びます。英語ではparemeterとかargumentと呼びます

### ヒント

- この場合はJavaScriptにもともと定義されている Math オブジェクトの```pow()```関数を使います。
- pow は power of の約です。「べき乗」の計算（a の n 乗）をしてくれます。
- pow() 関数は２つの引数を取ります。左から、ひとつ目の引数が基数（a)、ふたつ目の引数が指数（n）です

<br/><br/><br/><br/><br/>

### 実際にやってみよう！

```javascript
Math.pow(7, 5)
``` 

<br/><br/><br/><br/><br/>

### ふりかえり

- 関数は複数の引数を取るものもある
- 数値演算に関連した関数はMathオブジェクトに多く定義されている
- 関数によっては「結果」を返すものもある。この「関数が返す値」を*戻り値（もどりち）*と呼びます。英語では return value

# セクション２ 関数を作ってみる

プログラミングは「関数を作る仕事」と言ってもいいでしょう。ここでは関数を作る（定義する）やり方を練習します。

# 2.1 掛け算をする関数を作りましょう

## 問題

a と x という今の段階では分からない数値がを引数として受け取り、掛け算をしてその結果を返す関数を書いてください。関数には multiply という名前を付けてましょう。関数が出来たら実際に a と x にそれぞれ 3 と 5 を指定して呼び出してみましょう。結果が15なら成功です！

## ヒント

- 関数の名前は ``` var multiply ``` で表します
- a と x という引数を取る、という部分は ```(a, x)``` で表します。引数が複数の場合はコンマで区切ります（スペースはあっても無くてもいいですが、あった方が見やすいですね）
- a と x の掛け算の式は ``` a * x ``` で表します（「掛ける」はXではなく*で表すことに注意）
- 全部をまとめて「関数の名前」= 「関するの引数の部分」=> 「関数の式の部分」として表します（実際にやってみると分かりやすいです）

<br/><br/><br/><br/><br/>

### 実際にやってみよう！

```javascript
var multiply = (a, x) => a * x
multiply(3, 5)
``` 

<br/><br/><br/><br/><br/>

### ふりかえり


少し難しかったかもしれませんが、少しずつ分解して考えると理解できます。

- ``` var multiply = ``` の部分は*代入*です（英語で assignment ）。これは数値を格納する変数と全く同じ書き方です。*= 記号の右側*を*= 記号の左側*に*入れる（代わりとして入する）*という意味です。受け取る側（=記号の左側）オブジェクトでなくてはなりません。この場合は multiply という名前のオブジェクトを同時に定義しています
- 「= の右側」は``` (a, x) => a * x``` となっています。この形は (引数）=> 関数の式 という「関数の書き方」です。
- 式を評価した結果は関数から,呼び出し元に「返されます」。
- 全体を言葉で表すとすると、日本語だと少し不自然になりますが「引数に a と x をとり、掛け算の式を実装する関数を作って multiply という名前のオブジェクトに保存する」）」のようになります。（英語では define a function named multiply that takes two parameters, a and x, and return a product of the two parameters.）

# 2.2 関数の書き方に慣れよう

ここでは関数の使い方に慣れるように、いくつか練習をします。

最初は良く分からなても、実際に書いてさらに呼び出して使ってみることでだんだんと簡単に思えてくるでしょう。

# 2.2.1 慣れるための練習（４の１）

## 問題

関数の書き方が少し複雑なので、慣れるためにいくつかの簡単な関数を書きます
a と x を足す関数。名前は add


## ヒント

関数の名前はなんでもいいですが、すでに使われている名前を``` var```で再定義しようとするとエラーが出ます。逆に「= オペレータ」で上書きすると、それ以前の関数の実装は消えてなくなってしまいます。
引数の名前はなんでもいいですし、他の関数が引数として使っていたとしてもまた使えます。関数の引数の名前は、その関数の中だけで使われるので、同じ名前でぶつかることはないのです。逆に同じ関数の中で同じ名前を使う時は注意が必要です（別の機会に説明します）

<br/><br/><br/><br/><br/>

### 実際にやってみよう！

```javascript
var add = (a, x) => a + x
add(3, 5)
``` 

<br/><br/><br/><br/><br/>

### ふりかえり

もう簡単ですよね？では、次にもう少し複雑な関数を作って見ます

# 2.2.2 慣れるための練習（４の２）

## 問題

a と b と x を引数にとって、a * x + b になるような関数。名前はf1
確認として 3 * x 12 で x が5 の場合を関数f1を使って計算してみよう

<br/><br/><br/><br/><br/>

### 実際にやってみよう！

```javascript
var f1 = (a, b, x) => a * x + b
f1(3, 12, 5)
``` 

<br/><br/><br/><br/><br/>

### ふりかえり

どこかの数学の授業で見たことがあるような式が出てきましたね。せっかくなのでもっと数学の授業っぽいのをやってみましょう！


# 2.2.3 慣れるための練習（４の３）

## 問題

a と b と c と x を引数にとって、(a * x * x) +　(b * x) + c になるような関数。名前はf2
確認として 2 * x * x + 3 * x + 4 で x が8 の場合を関数f1を使って計算してみよう

<br/><br/><br/><br/><br/>

### 実際にやってみよう！

```javascript
var f2 = (a, b, c, x) => a * x * x + b * x + c
add(2, 3, 4, 8)
``` 

<br/><br/><br/><br/><br/>

### ふりかえり

こんな感じの数式、見たことがありますか？ こういう数式もコンピュータに仕事をさせることで簡単正確に計算できるます。

どうですか？慣れてきましたか？念のために引数が無い関数を書いてみましょう

# 2.2.4 慣れるための練習（４の４）

## 問題

引数を受け取らない関数を作って、```alert()``` 関数を使って```hello```というメッセージを表示してたいです。関数の名前は sayHelloです。

<br/><br/><br/><br/><br/>

### 実際にやってみよう！

```javascript
var sayHello = () => alert('hello')
sayHello()
``` 

<br/><br/><br/><br/><br/>

### ふりかえり

簡単ですね、空っぽのカッコを使えばいいだけです「関数の引数 => 関数の式」という形は同じです。

# 2.3 関数の便利な使い方を学ぼう

ここでは関数型プログラミングと呼ばれる、関数の特徴をより発揮して便利にするやり方を学びます

## 2.3.1 関数のパラメータの一部が分かっている時

## 問題

下のような関数を定義したのを覚えていますか？

```
var multiply = (a, x) => a * x
```

ところで a が 2 だと分かっているとして、新たに x だけをパラメータとして取る、 multiBy2 という名前の関数をつくりましょう

関数が出来たら、適当な数値を渡して呼び出してみましょう。結果がすべて２倍になっていることを確認しましょう

## ヒント

- すでに定義した multiply 関数を使いましょう。
- multiple の引数は a と x です。a は 2 だと分かっていますが、x の値は*未知のまま*です。この未知のままの状態を保ったまま*別の新しい関数*を作るには ``` (x) => multiply(2, x) ```` と書きます
- この関数は「関数の引数」=>「関数の式」の形のままですから、``` var multiBy2 = ``` という形で代入できるのです

<br/><br/><br/><br/><br/>

### 実際にやってみよう！

```javascript
var multiBy2 = (x) => multiply(2, x)
multiBy2(3)
multiBy2(12)
``` 

<br/><br/><br/><br/><br/>

### ふりかえり

- 最初に定義した multiply(a, x) という関数の引数のうち、分かっているパラメータだけ渡して別の名前の関数を作ることが出来ました
- このやり方で multyBy3 や multiBy4 や multiByPI なども、同じ multiply 関数で作ることが出来ます

## 2.3.2 算数の宿題を簡単にやる方法

## 問題

今回は、すでに定義した下のような関数再利用します。

```
var f2 = (a, b, c, x) => a * x * x + b * x + c
```

これは 数学で習う

<img src='https://latex.codecogs.com/svg.latex?\Large&space;\f(x)%20=%20ax^2%20+%20bx%20+%20c\'>

の式ですね。 

が 2 だと分かっているとして、新たに x だけをパラメータとして取る、 multiBy2 という名前の関数をつくりましょう

ここで、a, b, c がそれぞれ 2, 4, 6 で、x の値が 1, 2, 3, 4, 5 の時の値を求める問題が出たとします。すでに定義されている関数 f2 を再利用して新しい関数 fhw という名前の関数を定義しましょう（fhw は function home work の略です）。関数が定義できたら x の値を変えて結果を求めましょう。

## ヒント

- すでに定義した関数 f2 を使いましょう。
- f2 の引数は a, b, c はそれぞれ 2, 4, 6 だと分かっていますが、x の値は*未知のまま*です。この未知のままの状態を保ったまま*別の新しい関数*を作るには ``` (x) => f2(2, 4, 6, x) ```` と書きます

<br/><br/><br/><br/><br/>

### 実際にやってみよう！

```javascript
var fhw = (x) => f2(2, 4, 6, x)
fhw(1)
fhw(2)
fhw(3)
fhw(4)
fhw(5)
``` 

<br/><br/><br/><br/><br/>

### ふりかえり

- 最初に定義した f2(a, b, c, x) という関数の引数のうち、分かっているパラメータだけ渡して別の名前の関数を作ることが出来ました
- このやり方で a, b, c の値が異なる関数をいくつでも作ることができます

# 2.4 時間がたったら関数が呼び出されるようにする

# 問題

これまでは、関数を呼び出すのはコンソールに入力してEnterキーを押した瞬間でした。

今回はタイマーを仕掛けて、５秒たったら alert 関数を呼び出して time to go! というメッセージを表示するようにプログラミングしましょう。

### ヒント

- window オブジェクトに setTimeout という関数があります。この関数を使うと、指定した時間が経過したら、指定した関数が自動的に呼び出されるように出来ます。
- setTimout の引数は２つです。一つ目は関数です。これまで使ってきた「関数の引数」=>「関数の式」の書き方で関数を渡すことができます。この渡す関数は引数の数がゼロです。その場合空白のカッコ（）を使います
- setTimeout のもう１つの引数は、タイマーの時間をミリ秒単位で表した値です。例えば1000を渡すと1000ミリ秒つまり１秒のタイマーになります

<br/><br/><br/><br/><br/>

実際にやってみよう！　

```
setTimeout(() => alert('time to go'), 5000)
```

<br/><br/><br/><br/><br/>

### ふりかえり

- ５秒後にポップアップメッセージが表示されました
- 関数の引数として、別の関数を渡すことが出来ることが分かりました
- 引数として渡す関数は「名前が無い」状態です。名前が無くても構いません


------


# おまけ

関数の使い方でさらにいくつかのコツやルールがあります。もし興味があったらやってみてね。このあたりは使っているうちに学ぶことなんで、今勉強しなくても大丈夫です！

# おまけその１ 引数が１個だけの時はカッコはいらない

## 問題

引数aを受け取って、aを2倍する関数を作りたいです。関数の名前は mulby2です。

### ヒント

「(a）=> 式」 からカッコを取り除いて「a => 式」のように出来ます。引数が1個の時だけ特別です

<br/><br/><br/><br/><br/>

### 実際にやってみよう！

```javascript
var mulby2 = a => a * 2
mulby2(5)
``` 

<br/><br/><br/><br/><br/>

### ふりかえり

さらに単純にすることが出来ました。ですが、簡略化すればするほど、何のことだか良く分からなくなることもあります。慣れるまでは自分がよく理解しているやり方を使うといいでしょう。

次は関数の式の部分をちょっとだけ複雑にする場合の書き方を見ていきます

# おまけその２ 式が２つ以上の時は｛｝を使って１つにする

## 問題

引数は受け取らないが、```alert```関数を2回呼び出す関数を作りたいです。1回目のメッセージは```hello```、2回目のメッセージは```nice to meet you```にしたいです。関数の名前は greetです。

### ヒント

- alert('メッセージの内容') を2回、同じ行で呼び出すには*;*記号でひとつ目の関数呼び出しをはっきりと終わらせます。例： ```alert('メッセージの内容１'); alert('メッセージの内容２')``` 
- 関数の引数 => 関数の式 の書き方の場合関数の式は１つでなくてはなりません。```alert```関数を１回だけ呼び出す時は式は１つとされましたが、２回呼び出すと１つの式だとは解釈してもらえません。１つの式にまとめるには*{ }* で括ってやります。例： ```{alert('メッセージの内容１'); alert('メッセージの内容２')}``` 

<br/><br/><br/><br/><br/>

### 実際にやってみよう！

```javascript
var greet = () => { alert('hello'); alert('nice to meet you') }
mulby2(5)
``` 

<br/><br/><br/><br/><br/>

### ふりかえり

関数の式が複雑になると{ }を使ってひとつにまとめることが出来ます。｛ ｝を使う別の理由として return オペレータを使う場合があります。見てみましょう。

